#!/bin/sh

## Restrict kernel messages printed to console to levels emerg, alert
## and crit. Less urgent messages are not printed. Some devices produce
## lot of warnings and errors (e.g. mei_me module errors) which make
## console registration almost impossible.
dmesg -n2

export LANG=fi_FI.UTF-8
export TERM=vt100
setupcon
clear

until /usr/sbin/puavo-install; do
  echo 'Installation failed, press ENTER to try again.' > /dev/stderr
  read answer
done

echo
echo -n 'Press enter to reboot'
read answer

echo
echo -n rebooting...
for i in $(seq 5 | tac); do
  echo -n " $i"
  sleep 1
done

echo
reboot

sleep 600
